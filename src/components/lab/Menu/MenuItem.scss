@use '../../variables';
@use '../../../../styles/mixins';

$b: '.#{variables.$ns}menu2-item';

#{$b} {
    --_--min-height: auto;
    --_--padding-block: 0;
    --_--padding-inline: 0;
    --_--border-radius: 0;
    --_--icon-size: 0;
    --_--icon-offset: 0;
    --_--submenu-icon-shift: 0;
    --_--font: var(--g-text-body-1-font);
    --_--text-color: var(--g-color-text-primary);
    --_--background-color: transparent;

    @include mixins.button-reset();
    @include mixins.link-reset();
    display: flex;
    align-items: center;
    width: 100%;
    color: var(--_--text-color);
    background-color: var(--_--background-color);
    min-height: var(--_--min-height);
    padding: var(--_--padding-block) var(--_--padding-inline);
    border-radius: var(--_--border-radius);
    font: var(--_--font);

    &::before,
    &__icon {
        position: relative;
        inset-inline-end: var(--_--icon-offset);
        min-width: var(--_--icon-size);
        height: var(--_--icon-size);
    }

    &::after,
    &__arrow {
        position: relative;
        inset-inline-start: var(--_--submenu-icon-shift);
        margin-inline-start: auto;
        min-width: var(--_--icon-size);
        height: var(--_--icon-size);
        color: var(--g-color-text-secondary);
    }

    @at-root #{$b}:not(:has(> #{$b}__icon)):has(~ #{$b} > #{$b}__icon)::before,
        #{$b}:has(> #{$b}__icon) ~ #{$b}:not(:has(> #{$b}__icon))::before {
        content: '';
    }

    @at-root #{$b}:not(:has(> #{$b}__arrow)):has(~ #{$b} > #{$b}__arrow)::after,
        #{$b}:has(> #{$b}__arrow) ~ #{$b}:not(:has(> #{$b}__arrow))::after {
        content: '';
    }

    &_theme {
        &_info {
            --_--text-color: var(--g-color-text-info);
        }

        &_success {
            --_--text-color: var(--g-color-text-positive);
        }

        &_warning {
            --_--text-color: var(--g-color-text-warning);
        }

        &_danger {
            --_--text-color: var(--g-color-text-danger);
        }

        &_utility {
            --_--text-color: var(--g-color-text-utility);
        }
    }

    &_active {
        --_--background-color: var(--g-color-base-generic-hover);
    }

    &_has-focus-inside,
    &[aria-haspopup][aria-expanded='true']:not(&_active) {
        --_--background-color: var(--g-color-base-generic);
    }

    &_selected {
        --_--background-color: var(--g-color-base-selection);
    }

    &_selected#{$b}_active {
        --_--background-color: var(--g-color-base-selection-hover);
    }

    &_disabled {
        --_--text-color: var(--g-color-text-hint);

        cursor: default;
    }

    &_size {
        &_s {
            --_--min-height: 24px;
            --_--padding-block: 2px;
            --_--padding-inline: 8px;
            --_--border-radius: var(--g-border-radius-xs);
            --_--icon-size: 14px;
            --_--icon-offset: 4px;
            --_--submenu-icon-shift: 7px;
        }

        &_m {
            --_--min-height: 28px;
            --_--padding-block: 4px;
            --_--padding-inline: 12px;
            --_--border-radius: var(--g-border-radius-s);
            --_--icon-size: 16px;
            --_--icon-offset: 6px;
            --_--submenu-icon-shift: 8px;
        }

        &_l {
            --_--min-height: 36px;
            --_--padding-block: 8px;
            --_--padding-inline: 16px;
            --_--border-radius: var(--g-border-radius-m);
            --_--icon-size: 16px;
            --_--icon-offset: 6px;
            --_--submenu-icon-shift: 8px;
        }

        &_xl {
            --_--min-height: 44px;
            --_--padding-block: 12px;
            --_--padding-inline: 16px;
            --_--border-radius: var(--g-border-radius-l);
            --_--icon-size: 20px;
            --_--icon-offset: 6px;
            --_--submenu-icon-shift: 10px;
            --_--font: var(--g-text-body-2-font);
        }
    }
}
